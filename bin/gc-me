#!/usr/bin/env ruby

require 'bundler/setup'
Bundler.setup(:default, ENV['RACK_ENV'])

require 'newrelic_rpm'
require './lib/gc_me/system'

system = GCMe::System.build

trap(:INT) do
  puts 'Received SIGINT, exiting.'
  exit
end

trap(:TERM) do
  puts 'Received SIGTERM, exiting.'
  exit
end

begin
  system.start
  sleep
ensure
  system.stop
end
